<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quiz Started</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

    <style>
        body {
            margin: 0;
            font-family: 'Roboto', sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #1f1c2c, #928dab);
            color: #fff;
            position: relative;
            padding-top: 80px;
        }

        .header-logo {
            position: fixed;
            top: 20px;
            left: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
        }
        .header-logo img {
            width: 50px;
            height: 50px;
            border-radius: 10px;
        }
        .header-logo span {
            font-size: 24px;
            font-weight: 700;
            color: #f3c623;
        }

        .quiz-box {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            padding: 30px 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .timer {
            font-size: 18px;
            font-weight: bold;
            color: #f5576c;
        }

        .question-number {
            margin-bottom: 15px;
        }

        .q-btn {
            width: 40px;
            margin: 3px;
            background-color: rgba(255,255,255,0.1);
            border: none;
            color: #fff;
            font-weight: bold;
        }
        .active-q {
            background-color: #0d6efd;
            color: #fff;
        }
        .attempted {
            background-color: #198754 !important;
            color: #fff;
        }

        h5 {
            color: #f3c623;
        }

        .form-check-input {
            background-color: rgba(255,255,255,0.1);
            border: none;
        }

        .form-check-label {
            color: #ddd;
            font-weight: 500;
        }

        .btn-secondary {
            background-color: #444;
            border: none;
            color: #fff;
        }
        .btn-secondary:hover {
            background-color: #666;
        }

        .btn-danger {
            background-color: #f5576c;
            border: none;
            color: #fff;
        }
        .btn-danger:hover {
            background-color: #ff6f81;
        }
    </style>
</head>
<body>

<div class="header-logo">
    <img src="happy-coder-logo.png" alt="Happy Coder Logo">
    <span>Happy Coder</span>
</div>

<div class="quiz-box">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4>Welcome, <span id="userName"></span></h4>
        <div class="timer">
            ‚è± Time Left: <span id="time">45:00</span>
        </div>
    </div>

    <div class="question-number mb-4" id="questionNumbers"></div>

    <h5 id="question">Question will appear here</h5>

    <div class="mt-3">
        <div class="form-check">
            <input class="form-check-input" type="radio" name="option">
            <label class="form-check-label">Option 1</label>
        </div>

        <div class="form-check">
            <input class="form-check-input" type="radio" name="option">
            <label class="form-check-label">Option 2</label>
        </div>

        <div class="form-check">
            <input class="form-check-input" type="radio" name="option">
            <label class="form-check-label">Option 3</label>
        </div>

        <div class="form-check">
            <input class="form-check-input" type="radio" name="option">
            <label class="form-check-label">Option 4</label>
        </div>
    </div>

    <div class="mt-4 d-flex justify-content-between">
        <button class="btn btn-secondary" onclick="prevQuestion()">Previous</button>
        <button class="btn btn-secondary" onclick="nextQuestion()">Next</button>
        <button class="btn btn-danger" onclick="submitQuiz()">Submit Quiz</button>
    </div>

</div>

<script>
    document.getElementById("userName").innerText =
        localStorage.getItem("quizUser") || "User";

    let totalTime = 45 * 60;
    let timeTaken = 0;

    function startTimer() {
        let timerInterval = setInterval(() => {
            let minutes = Math.floor(totalTime / 60);
            let seconds = totalTime % 60;
            document.getElementById("time").innerText =
                `${minutes}:${seconds < 10 ? "0" : ""}${seconds}`;

            totalTime--;
            timeTaken++;

            if (totalTime < 0) {
                clearInterval(timerInterval);
                submitQuiz();
            }
        }, 1000);
    }

    startTimer();

    // ---------------- QUESTIONS ----------------
    const allQuestions = [
        {
            question: 'echo "DevSecOps"',
            options: ["devsecops", '"DevSecOps"', "DevSecOps", "Error"],
            correct: 2
        },
        {
            question: 'name="Linux"\necho $name',
            options: ["$name", "Linux", "name", "Error"],
            correct: 1
        },
        {
            question: 'echo $(pwd)',
            options: ["pwd", "Current directory path", "Home directory only", "Error"],
            correct: 1
        },
        {
            question: 'a=10\nb=5\necho $((a - b))',
            options: ["10", "5", "15", "Error"],
            correct: 1
        },
        {
            question: 'x=2\nif [ $x -gt 3 ]\nthen\n  echo "Yes"\nelse\n  echo "No"\nfi',
            options: ["Yes", "No", "2", "Error"],
            correct: 1
        },
        {
            question: 'for i in 1 2\ndo\n  echo "Linux"\ndone',
            options: ["Linux", "Linux Linux", "Linux\nLinux", "Error"],
            correct: 2
        },
        {
            question: 'i=1\nwhile [ $i -le 2 ]\ndo\n  echo $i\n  i=$((i+1))\ndone',
            options: ["1", "1 2", "1\n2", "Error"],
            correct: 2
        },
        {
            question: 'str="Dev"\necho ${#str}',
            options: ["2", "3", "Dev", "Error"],
            correct: 1
        },
        {
            question: 'echo "linux devsecops" | grep linux',
            options: ["linux", "devsecops", "linux devsecops", "No output"],
            correct: 2
        },
        {
            question: 'echo "abc" | tr \'a-z\' \'A-Z\'',
            options: ["abc", "ABC", "Abc", "Error"],
            correct: 1
        },
        {
            question: 'echo "root:x:0:0" | cut -d: -f2',
            options: ["root", "x", "0", "root:x"],
            correct: 1
        },
        {
            question: 'echo -e "1\\n2\\n3" | head -n 1',
            options: ["1 2 3", "1", "3", "Error"],
            correct: 1
        },
        {
            question: 'echo -e "a\\nb\\nc" | tail -n 2',
            options: ["a", "b", "b c", "Error"],
            correct: 2
        },
        {
            question: 'ls /tmp\necho $?',
            options: ["1", "Error", "0", "tmp"],
            correct: 2
        },
        {
            question: 'echo $((5 * 2))',
            options: ["10", "7", "52", "Error"],
            correct: 0
        },
        {
            question: 'echo "DevSecOps" | wc -c',
            options: ["9", "10", "11", "8"],
            correct: 1
        },
        {
            question: 'echo Linux | wc -w',
            options: ["5", "1", "0", "Error"],
            correct: 1
        },
        {
            question: 'echo "abc123" | grep [0-9]',
            options: ["abc", "123", "abc123", "No output"],
            correct: 2
        },
        {
            question: 'echo ${HOME}',
            options: ["/root", "Current directory", "Home directory path", "Error"],
            correct: 2
        },
        {
            question: 'echo $?\n(After a successful command)',
            options: ["1", "Error", "0", "Success"],
            correct: 2
        },
        {
            question: "Which command is used to list files in a directory?",
            options: ["pwd", "ls", "cd", "mkdir"],
            correct: 1
        },
        {
            question: "Which command shows the current working directory?",
            options: ["whoami", "ls", "pwd", "dir"],
            correct: 2
        },
        {
            question: "Which command is used to change file permissions?",
            options: ["chown", "chmod", "passwd", "umask"],
            correct: 1
        },
        {
            question: "Which permission allows a file to be executed?",
            options: ["r", "w", "x", "d"],
            correct: 2
        },
        {
            question: "Which command is used to create a new directory?",
            options: ["touch", "mkdir", "rmdir", "dir"],
            correct: 1
        },
        {
            question: "Which command is used to create an empty file?",
            options: ["mkdir", "cp", "touch", "cat"],
            correct: 2
        },
        {
            question: "Which command displays the content of a file?",
            options: ["view", "show", "cat", "open"],
            correct: 2
        },
        {
            question: "Which command is used to delete a file?",
            options: ["erase", "rm", "del", "remove"],
            correct: 1
        },
        {
            question: "Which command is used to move or rename files?",
            options: ["mv", "cp", "rename", "move"],
            correct: 0
        },
        {
            question: "Which command is used to copy files?",
            options: ["copy", "cp", "mv", "clone"],
            correct: 1
        },
        {
            question: "Which command shows running processes?",
            options: ["run", "process", "ps", "jobs"],
            correct: 2
        },
        {
            question: "Which command is commonly used to monitor system resources?",
            options: ["free", "top", "ps", "df"],
            correct: 1
        },
        {
            question: "Which command shows disk usage?",
            options: ["du", "df", "free", "top"],
            correct: 1
        },
        {
            question: "Which command checks free and used memory?",
            options: ["mem", "free", "top", "vm"],
            correct: 1
        },
        {
            question: "Which command is used to search text in files (useful for logs)?",
            options: ["find", "locate", "grep", "search"],
            correct: 2
        },
        {
            question: "Which file contains user account information?",
            options: ["/etc/group", "/etc/passwd", "/etc/shadow", "/var/log/auth.log"],
            correct: 1
        },
        {
            question: "Which command is used to switch users (important for privilege control)?",
            options: ["sudo", "login", "su", "useradd"],
            correct: 2
        },
        {
            question: "Which command allows running commands with admin privileges?",
            options: ["root", "su", "sudo", "admin"],
            correct: 2
        },
        {
            question: "Which command is used to check who is logged in?",
            options: ["whoami", "users", "who", "login"],
            correct: 2
        },
        {
            question: "Which command shows your current username?",
            options: ["user", "who", "whoami", "id"],
            correct: 2
        },
        {
            question: "Which command is used to archive files (DevSecOps backups)?",
            options: ["zip", "tar", "gzip", "rar"],
            correct: 1
        },
        {
            question: "Which command compresses files using gzip?",
            options: ["zip", "compress", "gzip", "tar"],
            correct: 2
        },
        {
            question: "Which command checks open network ports (security monitoring)?",
            options: ["netstat", "ping", "traceroute", "ftp"],
            correct: 0
        },
        {
            question: "Which command tests network connectivity?",
            options: ["ifconfig", "netstat", "ping", "ssh"],
            correct: 2
        },
        {
            question: "Which command is used for secure remote login?",
            options: ["telnet", "ftp", "ssh", "rlogin"],
            correct: 2
        },
        {
            question: "Which command changes file ownership?",
            options: ["chmod", "chown", "usermod", "groupadd"],
            correct: 1
        },
        {
            question: "Which command is used to add a new user?",
            options: ["adduser", "useradd", "newuser", "createuser"],
            correct: 1
        },
        {
            question: "Which directory contains log files (security auditing)?",
            options: ["/etc", "/bin", "/var/log", "/home"],
            correct: 2
        },
        {
            question: "Which command displays the last login history?",
            options: ["history", "last", "who", "login"],
            correct: 1
        },
        {
            question: "Which command shows command history (useful for auditing)?",
            options: ["past", "log", "history", "recent"],
            correct: 2
        },
        {
            question: "Linux is best described as:",
            options: [
            "An application software",
            "A programming language",
            "An operating system kernel",
            "A database"
            ],
            correct: 2
        },
        {
            question: "Which command is used to display the current working directory?",
            options: ["pwd", "ls", "cd", "dir"],
            correct: 0
        },
        {
            question: "Which command lists files including hidden files?",
            options: ["ls", "ls -a", "ls -l", "list"],
            correct: 1
        },
        {
            question: "File permissions in Linux are represented by:",
            options: ["Numbers only", "Letters only", "Read, Write, Execute", "Owner name"],
            correct: 2
        },
        {
            question: "Which permission allows a file to be executed?",
            options: ["r", "w", "x", "e"],
            correct: 2
        },
        {
            question: "Which command is used to change file permissions?",
            options: ["chown", "chmod", "usermod", "perm"],
            correct: 1
        },
        {
            question: "Which file contains user account information?",
            options: ["/etc/passwd", "/etc/shadow", "/etc/group", "/home"],
            correct: 0
        },
        {
            question: "Which command shows running processes?",
            options: ["jobs", "top", "run", "execute"],
            correct: 1
        },
        {
            question: "Which signal is used to terminate a process gracefully?",
            options: ["SIGSTOP", "SIGKILL", "SIGTERM", "SIGPAUSE"],
            correct: 2
        },
        {
            question: "Which command is used to search text in files?",
            options: ["find", "locate", "grep", "search"],
            correct: 2
        },
        {
            question: "Which command checks network connectivity?",
            options: ["ifconfig", "ping", "traceroute", "netstat"],
            correct: 1
        },
        {
            question: "Which command displays IP address details?",
            options: ["ping", "ifconfig / ip addr", "netstat", "route"],
            correct: 1
        },
        {
            question: "Which package manager is used in Ubuntu?",
            options: ["yum", "pacman", "apt", "zypper"],
            correct: 2
        },
        {
            question: "Which command installs a package in Ubuntu?",
            options: ["apt-get install", "yum install", "rpm -i", "dpkg"],
            correct: 0
        },
        {
            question: "Which command finds files by name?",
            options: ["grep", "search", "find", "locate"],
            correct: 2
        },
        {
            question: "Which operator is used to redirect output to a file?",
            options: ["|", ">", "<", "&"],
            correct: 1
        },
        {
            question: "Which symbol starts a bash script?",
            options: ["#!/bin/bash", "#bash", "$bash", "@bash"],
            correct: 0
        },
        {
            question: "Which command gives execute permission to a script?",
            options: ["chmod +x script.sh", "chmod 777", "bash script", "run script"],
            correct: 0
        },
        {
            question: "SaaS stands for:",
            options: [
            "Software as a System",
            "Software as a Service",
            "Storage as a Service",
            "System as a Service"
            ],
            correct: 1
        },
        {
            question: "Which cloud model provides virtual machines?",
            options: ["SaaS", "PaaS", "IaaS", "FaaS"],
            correct: 2
        },
        {
            question: "Which AWS service provides compute power?",
            options: ["S3", "EC2", "RDS", "Lambda"],
            correct: 1
        },
        {
            question: "Which AWS service is used for object storage?",
            options: ["EC2", "RDS", "S3", "EBS"],
            correct: 2
        },
        {
            question: "RDS is mainly used for:",
            options: ["File storage", "Databases", "Networking", "Containers"],
            correct: 1
        },
        {
            question: "Which AWS service controls permissions?",
            options: ["VPC", "IAM", "S3", "EC2"],
            correct: 1
        },
        {
            question: "Security Groups in AWS act as:",
            options: ["Firewalls", "Routers", "Load balancers", "Gateways"],
            correct: 0
        },
        {
            question: "Docker is mainly used for:",
            options: ["Virtualization", "Containerization", "Monitoring", "Networking"],
            correct: 1
        },
        {
            question: "Which file is used to build Docker images?",
            options: ["docker.yaml", "image.txt", "Dockerfile", "container.conf"],
            correct: 2
        },
        {
            question: "Kubernetes is used for:",
            options: [
            "Image creation",
            "Container orchestration",
            "Code testing",
            "Version control"
            ],
            correct: 1
        },
        {
            question: "DevOps mainly focuses on:",
            options: [
            "Development only",
            "Operations only",
            "Collaboration & automation",
            "Testing only"
            ],
            correct: 2
        },
        {
            question: "Which tool is used for version control?",
            options: ["Jenkins", "Docker", "Git", "Kubernetes"],
            correct: 2
        },
        {
            question: "Jenkins is used for:",
            options: ["Monitoring", "CI/CD automation", "Storage", "Security"],
            correct: 1
        },
        {
            question: "AWS CodeCommit is used for:",
            options: ["Building code", "Code repository", "Deployment", "Monitoring"],
            correct: 1
        },
        {
            question: "AWS CodeBuild is used for:",
            options: [
            "Source control",
            "Build automation",
            "Deployment",
            "Logging"
            ],
            correct: 1
        },
        {
            question: "AWS CodePipeline is used to:",
            options: [
            "Store images",
            "Automate CI/CD workflow",
            "Run containers",
            "Manage IAM"
            ],
            correct: 1
        },
        {
            question: "AWS CodeDeploy is used for:",
            options: [
            "Continuous Integration",
            "Continuous Deployment",
            "Monitoring",
            "Testing"
            ],
            correct: 1
        },
        {
            question: "Terraform is an example of:",
            options: [
            "CI tool",
            "Configuration Management",
            "Infrastructure as Code",
            "Monitoring tool"
            ],
            correct: 2
        },
        {
            question: "Containerization helps in:",
            options: [
            "Increasing hardware usage",
            "Faster deployment",
            "Manual scaling",
            "Slower delivery"
            ],
            correct: 1
        },
        {
            question: "AWS ECR is used for:",
            options: [
            "Code storage",
            "Docker image storage",
            "Database storage",
            "Logs"
            ],
            correct: 1
        },
        {
            question: "AWS EKS is a managed service for:",
            options: ["Docker", "Kubernetes", "Jenkins", "Terraform"],
            correct: 1
        },
        {
            question: "DevSecOps integrates:",
            options: [
            "Development only",
            "Security only",
            "Development, Security & Operations",
            "Testing only"
            ],
            correct: 2
        }
    ];

    function getRandomQuestions() {
        let shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
        return shuffled.slice(0, Math.min(20, shuffled.length));
    }

    const selectedQuestions = getRandomQuestions();

    let currentQuestionIndex = 0;
    let userAnswers = new Array(selectedQuestions.length).fill(null);

    function loadQuestion(index) {
        const q = selectedQuestions[index];
        document.getElementById("question").innerText =
            `Q${index + 1}. ${q.question}`;

        const labels = document.querySelectorAll(".form-check-label");
        const radios = document.querySelectorAll(".form-check-input");

        labels.forEach((label, i) => {
            label.innerText = q.options[i];
            radios[i].checked = userAnswers[index] === i;
        });

        updateButtons();
    }

    document.querySelectorAll(".form-check-input").forEach((radio, i) => {
        radio.addEventListener("change", () => {
            userAnswers[currentQuestionIndex] = i;
            updateButtons();
        });
    });

    function nextQuestion() {
        if (currentQuestionIndex < selectedQuestions.length - 1) {
            currentQuestionIndex++;
            loadQuestion(currentQuestionIndex);
        }
    }

    function prevQuestion() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            loadQuestion(currentQuestionIndex);
        }
    }

    function createQuestionButtons() {
        const container = document.getElementById("questionNumbers");
        container.innerHTML = "";

        selectedQuestions.forEach((_, index) => {
            const btn = document.createElement("button");
            btn.innerText = index + 1;
            btn.className = "btn btn-outline-primary q-btn";

            btn.onclick = () => {
                currentQuestionIndex = index;
                loadQuestion(index);
            };

            container.appendChild(btn);
        });
    }

    function updateButtons() {
        const buttons = document.querySelectorAll(".q-btn");

        buttons.forEach((btn, index) => {
            btn.classList.remove("active-q", "attempted");

            if (index === currentQuestionIndex) {
                btn.classList.add("active-q");
            } else if (userAnswers[index] !== null) {
                btn.classList.add("attempted");
            }
        });
    }

    function submitQuiz() {
        let correct = 0;
        let wrong = 0;

        selectedQuestions.forEach((q, i) => {
            if (userAnswers[i] === q.correct) correct++;
            else wrong++;
        });

        let percentage = ((correct / selectedQuestions.length) * 100).toFixed(2);

        localStorage.setItem("correct", correct);
        localStorage.setItem("wrong", wrong);
        localStorage.setItem("percentage", percentage);
        localStorage.setItem("timeTaken", timeTaken);
        localStorage.setItem("selectedQuestions", JSON.stringify(selectedQuestions));
        localStorage.setItem("userAnswers", JSON.stringify(userAnswers));

        window.location.href = "result.html";
    }

    createQuestionButtons();
    loadQuestion(currentQuestionIndex);
</script>

</body>
</html>

